<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    body { font-family: 'Kanit', sans-serif; }
    
    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏Å‡∏ï‡∏¥ */
    #map-wrapper {
      position: relative;
      width: 100%;
      height: 250px;
      border-radius: 0.75rem;
      overflow: hidden;
      border: 2px solid #e5e7eb;
    }

    #map { width: 100%; height: 100%; z-index: 1; }

    /* ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ (Fullscreen) */
    .map-fullscreen {
      position: fixed !important;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 9999 !important;
      border-radius: 0 !important;
      border: none !important;
    }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÉ‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà */
    .map-controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10000;
      display: flex;
      gap: 10px;
      width: 90%;
      justify-content: center;
    }
  </style>
</head>

<body class="bg-blue-50 min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-md">
    <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-center text-blue-600 mb-6">üìù ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h2>

      <form id="repairForm" class="space-y-4">
        <input type="hidden" id="userId" name="userId">

        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200 shadow-sm">
          <label class="block text-gray-700 font-bold mb-2">üì¢ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£? *</label>
          <select name="category" id="category" required
            class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-lg">
            <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ --</option>
            <option value="‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞">üí° ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞ (‡πÑ‡∏ü‡∏î‡∏±‡∏ö/‡∏Å‡∏¥‡πà‡∏á‡πÑ‡∏°‡πâ)</option>
            <option value="‡∏õ‡∏£‡∏∞‡∏õ‡∏≤/‡∏ó‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥">üö∞ ‡∏õ‡∏£‡∏∞‡∏õ‡∏≤ / ‡∏ó‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥</option>
            <option value="‡∏ñ‡∏ô‡∏ô/‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡πâ‡∏≤">üõ£Ô∏è ‡∏ñ‡∏ô‡∏ô / ‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î</option>
            <option value="‡∏Ç‡∏¢‡∏∞/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î">üóëÔ∏è ‡∏Ç‡∏¢‡∏∞ / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î</option>
            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">üìù ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
          </select>
        </div>

        <div>
          <label class="block text-gray-700 font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á *</label>
          <input type="text" name="name" id="name" required
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
        </div>

        <div>
          <label class="block text-gray-700 font-bold mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
          <input type="tel" name="phone" id="phone" required maxlength="10"
            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
        </div>

        <div>
          <label class="block text-gray-700 font-bold mb-2">üìç ‡∏à‡∏∏‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏) *</label>
          
          <div id="map-wrapper">
            <div id="map"></div>
            
            <button type="button" id="btnExpand" onclick="toggleMapSize()" 
              class="absolute top-2 right-2 z-[500] bg-white text-blue-600 px-3 py-1 rounded shadow text-sm font-bold border border-blue-100 flex items-center gap-1">
              üîç ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠
            </button>

            <div id="fullscreenControls" class="map-controls hidden">
               <button type="button" onclick="getCurrentLocation()" class="bg-white text-gray-700 px-4 py-3 rounded-full shadow-lg font-bold flex-1">
                 üéØ ‡∏´‡∏≤‡∏â‡∏±‡∏ô
               </button>
               <button type="button" onclick="toggleMapSize()" class="bg-blue-600 text-white px-6 py-3 rounded-full shadow-lg font-bold flex-[2]">
                 ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ
               </button>
            </div>
          </div>

          <p id="locationText" class="text-xs text-gray-500 mt-2 text-center">‡∏û‡∏¥‡∏Å‡∏±‡∏î: <span id="latDisplay">-</span>, <span id="lngDisplay">-</span></p>
          <input type="hidden" name="lat" id="lat">
          <input type="hidden" name="long" id="long">
        </div>

        <div>
          <label class="block text-gray-700 font-bold mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î *</label>
          <textarea name="detail" id="detail" rows="2" required
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="‡∏ö‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"></textarea>
        </div>

        <div>
          <label class="block text-gray-700 font-bold mb-2">‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢ *</label>
          <div class="flex items-center justify-center w-full">
            <label class="flex flex-col w-full h-24 border-4 border-blue-200 border-dashed hover:bg-gray-100 rounded-lg cursor-pointer bg-blue-50">
              <div class="flex flex-col items-center justify-center pt-5">
                <p class="text-sm text-gray-500">üì∏ ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</p>
              </div>
              <input type="file" name="image" id="imageInput" class="hidden" accept="image/*" capture="environment"
                onchange="previewImage(event)" required>
              <input type="hidden" name="photoUrl" id="photoUrl">
            </label>
          </div>
          <img id="preview" class="hidden w-full h-48 object-cover mt-2 rounded-lg shadow-md" />
        </div>

        <button type="submit" id="submitBtn"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg mt-4 text-lg">
          üöÄ ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°
        </button>
      </form>
    </div>
    <p class="text-center text-gray-500 text-xs mt-6 mb-10">‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏• by Alieninburi</p>
  </div>

  <div id="loading" class="hidden fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-[10000]">
    <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
  </div>

  <script>
    const WEBHOOK_URL = 'https://hook.eu1.make.com/8uj45pto8ouoba79ndgs8urhwork3ame';
    const IMGBB_API_KEY = '90bdd186ac4a75a080d137e88c123b84';
    
    let map, marker;
    const defaultLat = 14.996; 
    const defaultLng = 100.327;
    let isFullscreen = false;

    window.onload = function() {
      initializeLiff();
      initMap();
      autoSelectCategory();
    };

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏ö Mobile ---
    function initMap() {
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
      map = L.map('map', {
        zoomControl: false // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° Zoom ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
      }).setView([defaultLat, defaultLng], 13);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OSM'
      }).addTo(map);

      // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏´‡∏°‡∏∏‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
      const bigIcon = L.icon({
        iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
        shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
        iconSize: [30, 50], // ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô
        iconAnchor: [15, 50],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
      });

      marker = L.marker([defaultLat, defaultLng], {draggable: true, icon: bigIcon}).addTo(map);

      // Event: ‡∏•‡∏≤‡∏Å‡∏´‡∏°‡∏∏‡∏î‡∏à‡∏ö
      marker.on('dragend', function(e) {
        updateInput(marker.getLatLng());
      });

      // Event: ‡∏à‡∏¥‡πâ‡∏°‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡∏°‡∏∏‡∏î
      map.on('click', function(e) {
        marker.setLatLng(e.latlng);
        updateInput(e.latlng);
      });

      // ‡∏î‡∏∂‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
      getCurrentLocation();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠
    function toggleMapSize() {
      const wrapper = document.getElementById('map-wrapper');
      const btnExpand = document.getElementById('btnExpand');
      const controls = document.getElementById('fullscreenControls');
      
      isFullscreen = !isFullscreen;

      if (isFullscreen) {
        wrapper.classList.add('map-fullscreen'); // ‡πÉ‡∏™‡πà class ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠
        btnExpand.classList.add('hidden');       // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏¢‡∏≤‡∏¢
        controls.classList.remove('hidden');     // ‡πÇ‡∏ä‡∏ß‡πå‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
        document.body.style.overflow = 'hidden'; // ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á
      } else {
        wrapper.classList.remove('map-fullscreen'); // ‡πÄ‡∏≠‡∏≤ class ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡∏≠‡∏≠‡∏Å
        btnExpand.classList.remove('hidden');       // ‡πÇ‡∏ä‡∏ß‡πå‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏¢‡∏≤‡∏¢
        controls.classList.add('hidden');           // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
        document.body.style.overflow = 'auto';      // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥
      }

      // **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å** ‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏≠‡∏Å Leaflet ‡∏ß‡πà‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏ß‡∏≤‡∏î‡πÉ‡∏´‡∏°‡πà
      setTimeout(() => {
        map.invalidateSize();
        // ‡∏ñ‡πâ‡∏≤‡∏Ç‡∏¢‡∏≤‡∏¢ ‡πÉ‡∏´‡πâ‡∏ã‡∏π‡∏°‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏∏‡∏î
        if(isFullscreen) map.setView(marker.getLatLng(), map.getZoom());
      }, 300);
    }

    function getCurrentLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition((position) => {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;
          const latlng = { lat: lat, lng: lng };
          
          map.setView(latlng, 17);
          marker.setLatLng(latlng);
          updateInput(latlng);
        }, (err) => {
          console.log("GPS Error");
        }, {enableHighAccuracy: true});
      }
    }

    function updateInput(latlng) {
      const lat = latlng.lat.toFixed(6);
      const lng = latlng.lng.toFixed(6);
      document.getElementById('lat').value = lat;
      document.getElementById('long').value = lng;
      document.getElementById('latDisplay').innerText = lat;
      document.getElementById('lngDisplay').innerText = lng;
    }

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ---
    async function initializeLiff() {
      try {
        await liff.init({ liffId: "2009072405-2lzKZtgB" });
        if (liff.isLoggedIn()) {
          const profile = await liff.getProfile();
          document.getElementById('userId').value = profile.userId;
        } else { liff.login(); }
      } catch (err) { console.error(err); }
    }

    function autoSelectCategory() {
      const urlParams = new URLSearchParams(window.location.search);
      const type = urlParams.get('type');
      if(type) {
        const dropdown = document.getElementById('category');
        const mapType = {'electric':'‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞','water':'‡∏õ‡∏£‡∏∞‡∏õ‡∏≤/‡∏ó‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥','road':'‡∏ñ‡∏ô‡∏ô/‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡πâ‡∏≤','trash':'‡∏Ç‡∏¢‡∏∞/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î','other':'‡∏≠‡∏∑‡πà‡∏ô‡πÜ'};
        if(mapType[type]) dropdown.value = mapType[type];
      }
    }

    function previewImage(event) {
        const file = event.target.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                const output = document.getElementById('preview');
                output.src = e.target.result;
                output.classList.remove('hidden');
            }
            reader.readAsDataURL(file);
        }
    }

    document.getElementById('repairForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      
      const lat = document.getElementById('lat').value;
      if (!lat) { Swal.fire('‡∏•‡∏∑‡∏°‡∏£‡∏∞‡∏ö‡∏∏‡∏û‡∏¥‡∏Å‡∏±‡∏î', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏¥‡πâ‡∏°‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà', 'warning'); return; }

      document.getElementById('loading').classList.remove('hidden');
      document.getElementById('submitBtn').disabled = true;

      try {
        // Upload Image
        const imageFile = document.getElementById('imageInput').files[0];
        const reader = new FileReader();
        reader.readAsDataURL(imageFile);
        reader.onloadend = async () => {
          const base64 = String(reader.result).split(',')[1];
          const fd = new FormData();
          fd.append('image', base64);
          
          const imgRes = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, { method: 'POST', body: fd });
          const imgData = await imgRes.json();
          const photoUrl = imgData.data.url;

          // Submit Form
          const formData = new FormData(document.getElementById('repairForm'));
          formData.set('photoUrl', photoUrl);
          formData.delete('image');

          const res = await fetch(WEBHOOK_URL, { method: 'POST', body: formData });
          if (res.ok) {
            Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', 'success').then(() => liff.closeWindow());
          } else { throw new Error('Webhook Error'); }
        }
      } catch (error) {
        Swal.fire('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'error');
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('submitBtn').disabled = false;
      }
    });
  </script>
</body>
</html>
